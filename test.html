<script src="https://cdn.jsdelivr.net/gh/aframevr/aframe@1c2407b26c61958baa93967b5412487cd94b290b/dist/aframe-master.min.js"></script>
<script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar-nft.js"></script>

<style>
  .arjs-loader {
    height: 100%;
    width: 100%;
    position: absolute;
    top: 0;
    left: 0;
    background-color: rgba(0, 0, 0, 0.8);
    z-index: 9999;
    display: flex;
    justify-content: center;
    align-items: center;
  }

  .arjs-loader div {
    text-align: center;
    font-size: 1.25em;
    color: white;
  }
</style>

<body style="margin:0; overflow:hidden;">
<div class="arjs-loader"><div>Loading, please wait...</div></div>

<a-scene
  vr-mode-ui="enabled:false;"
  renderer="logarithmicDepthBuffer:true;"
  embedded
  arjs="trackingMethod: best; sourceType: webcam; debugUIEnabled:false;"
>

  <!-- SILKSONG → Hornet -->
  <a-nft
      id="markerSilk"
      type="nft"
      url="https://raw.githubusercontent.com/MariusPopa1/AR-System/master/markers/silksong"   
      smooth="true" smoothCount="10" smoothTolerance=".01" smoothThreshold="5"
  >
      <a-entity
          id="hornetModel"
          position="110 0 -100"
          scale="125 125 125"
          gltf-model="models/hornet1.glb"
          rotation="-90 0 0"
          visible="false"
      ></a-entity>
  </a-nft>

  <!-- STAFF -->
  <a-nft
      id="markerStaff"
      type="nft"
      url="https://raw.githubusercontent.com/MariusPopa1/AR-System/master/markers/staff"
      smooth="true" smoothCount="10" smoothTolerance=".01" smoothThreshold="5"
  >
      <a-entity
        position="30 -10 -70"
        scale="80 80 80"
        gltf-model="models/staff.glb"
        rotation="-90 -45 0"
      ></a-entity>
  </a-nft>

  <!-- NEEDLE -->
  <a-nft
      id="markerNeedle"
      type="nft"
      url="https://raw.githubusercontent.com/MariusPopa1/AR-System/master/markers/needle"
      smooth="true" smoothCount="10" smoothTolerance=".01" smoothThreshold="5"
  >
      <a-entity
          position="110 0 -270"
          scale="200 200 200"
          gltf-model="models/needle.glb"
          rotation="0 -135 0"
      ></a-entity>
  </a-nft>

  <!-- BLADE -->
  <a-nft
      id="markerBlade"
      type="nft"
      url="https://raw.githubusercontent.com/MariusPopa1/AR-System/master/markers/blade"
      smooth="true" smoothCount="10" smoothTolerance=".01" smoothThreshold="5"
  >
      <a-entity
        position="55 0 -140"
        scale="10 10 10"
        gltf-model="models/blade.glb"
        rotation="90 0 -90"
      ></a-entity>
  </a-nft>

  <!-- HADES → Zagreus -->
  <a-nft
      id="markerHades"
      type="nft"
      url="https://raw.githubusercontent.com/MariusPopa1/AR-System/master/markers/hades"
      smooth="true" smoothCount="10" smoothTolerance=".01" smoothThreshold="5"
  >
      <a-entity
        id="zagreusModel"
        position="70 0 -100"
        scale="50 50 50"
        gltf-model="models/zagreus.glb"
        rotation="-90 0 0"
        visible="false"
      ></a-entity>
  </a-nft>

<a-entity camera>
  <a-entity id="weaponText"
            position="0 -0.2 -1"
            text="value: Choose your weapon; color: yellow; align: center; width: 2"
            visible="false">
  </a-entity>
</a-entity>
</a-scene>

<img id="deathScreen" src="died.PNG"
     style="display:none; position:fixed; top:0; left:0; width:100vw; height:100vh; object-fit:cover; opacity:0; transition:opacity 2s ease; z-index:999999;">

<script>
let needleScanned = false;
let bladeScanned = false;



// Hide the "Choose your weapon" text after 3 seconds
  document.querySelector('a-scene').addEventListener('loaded', () => {
    const text = document.getElementById("weaponText");
    text.setAttribute("visible", true);

    // Hide after 3 seconds
    setTimeout(() => {
      text.setAttribute("visible", false);
    }, 3000);
  });
// Needle marker → unlock Hornet
document.getElementById("markerNeedle").addEventListener("markerFound", () => {
  needleScanned = true;
});

// Blade marker → unlock Zagreus
document.getElementById("markerBlade").addEventListener("markerFound", () => {
  bladeScanned = true;
});

// Silksong marker → show Hornet only if needle was scanned
document.getElementById("markerSilk").addEventListener("markerFound", () => {
  if (needleScanned) {
    document.getElementById("hornetModel").setAttribute("visible", true);
  }
});

// Hades marker → show Zagreus only if blade was scanned
document.getElementById("markerHades").addEventListener("markerFound", () => {
  if (bladeScanned) {
    document.getElementById("zagreusModel").setAttribute("visible", true);
  }
});

// Death screen timer (unchanged)
function showDeathScreen() {
  const img = document.getElementById("deathScreen");
  img.style.display = "block";
  setTimeout(() => img.style.opacity = "1", 50);
}

document.getElementById("markerStaff").addEventListener("markerFound", () => {
  setTimeout(showDeathScreen, 2000);
});
</script>

</body>
